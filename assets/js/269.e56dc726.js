(window.webpackJsonp=window.webpackJsonp||[]).push([[269],{658:function(a,t,s){"use strict";s.r(t);var e=s(8),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"immugw"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#immugw"}},[a._v("#")]),a._v(" immugw")]),a._v(" "),t("p",[a._v("immugw is the intelligent REST proxy that connects to immudb and provides a RESTful interface for applications. We recommend running immudb and immugw on separate machines to enhance security\nimmugw can be found in a different "),t("a",{attrs:{href:"https://github.com/codenotary/immugw",target:"_blank",rel:"noopener noreferrer"}},[a._v("repository"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"contents"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#contents"}},[a._v("#")]),a._v(" Contents")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#latest-binaries"}},[a._v("Latest binaries")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#build"}},[a._v("Build")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#docker"}},[a._v("Docker")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#run-immugw"}},[a._v("Run immugw")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#configuration"}},[a._v("Configuration")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#immuadmin"}},[a._v("immuadmin")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#immugw-service"}},[a._v("immugw service")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#use-immugw"}},[a._v("Use immugw")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#api"}},[a._v("API")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#auditor"}},[a._v("Auditor")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#license"}},[a._v("License")])])]),a._v(" "),t("h2",{attrs:{id:"latest-binaries"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#latest-binaries"}},[a._v("#")]),a._v(" Latest binaries")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/codenotary/immugw/releases/latest",target:"_blank",rel:"noopener noreferrer"}},[a._v("Get the latest builds"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"build"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#build"}},[a._v("#")]),a._v(" Build")]),a._v(" "),t("p",[a._v("clone the immugw repository locally")]),a._v(" "),t("p",[a._v("'git clone "),t("a",{attrs:{href:"https://github.com/codenotary/immugw.git",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://github.com/codenotary/immugw.git"),t("OutboundLink")],1),a._v("'")]),a._v(" "),t("h3",{attrs:{id:"linux"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux"}},[a._v("#")]),a._v(" Linux")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GOOS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("linux "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GOARCH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("amd64 "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" immugw-static\n")])])]),t("h3",{attrs:{id:"macos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#macos"}},[a._v("#")]),a._v(" MacOS")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GOOS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("darwin "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GOARCH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("amd64 "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" immugw-static\n")])])]),t("h3",{attrs:{id:"windows"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows"}},[a._v("#")]),a._v(" Windows")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GOOS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("windows "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GOARCH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("amd64 "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" immugw-static\n")])])]),t("h2",{attrs:{id:"docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[a._v("#")]),a._v(" Docker")]),a._v(" "),t("h3",{attrs:{id:"build-your-own-docker-container-image"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#build-your-own-docker-container-image"}},[a._v("#")]),a._v(" build your own Docker container image")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" build "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" myown/immugw:latest "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" Dockerfile "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n")])])]),t("h3",{attrs:{id:"run-immugw-in-a-container"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#run-immugw-in-a-container"}},[a._v("#")]),a._v(" run immugw in a container")]),a._v(" "),t("p",[a._v("Make sure to point to the immudb system using the environment variable IMMUGW_IMMUDB_ADDRESS")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker run -it -d -p 3323:3323 --name immugw --env IMMUGW_IMMUDB_ADDRESS=immudb codenotary/immugw:latest\n")])])]),t("h2",{attrs:{id:"run-immugw"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#run-immugw"}},[a._v("#")]),a._v(" Run immugw")]),a._v(" "),t("p",[a._v("Simply run "),t("code",[a._v("./immugw -d")]),a._v(" to start immugw on the same machine as immudb (test or dev environment) or pointing to the remote immudb system "),t("code",[a._v('./immugw --immudb-address "immudb-server"')]),a._v(".")]),a._v(" "),t("p",[a._v("If you want to stop immugw Ã®n that case you need to find the process "),t("code",[a._v("ps -ax | grep immugw")]),a._v(" and then "),t("code",[a._v("kill -15 <pid>")]),a._v(". Windows PowerShell would be "),t("code",[a._v("Get-Process immugw* | Stop-Process")]),a._v(".")]),a._v(" "),t("h2",{attrs:{id:"configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[a._v("#")]),a._v(" Configuration")]),a._v(" "),t("p",[a._v("immugw can be configured using environment variables, flags or a config file.")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("immugw --help")]),a._v(" shows you all available flags and environment variables.")]),a._v(" "),t("li",[t("code",[a._v("/etc/immudb/immugw.toml")]),a._v(" is used as a default configuration file")])]),a._v(" "),t("h3",{attrs:{id:"environment-variables"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#environment-variables"}},[a._v("#")]),a._v(" Environment variables")]),a._v(" "),t("p",[a._v("The environment variables are the most popular way to configure Docker container:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_ADDRESS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3323")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_IMMUDB_ADDRESS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_IMMUDB_PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3322")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(".\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_PIDFILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_LOGFILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_DETACHED")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("false\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_MTLS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("false\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_SERVERNAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("localhost\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_AUDIT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("false\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_AUDIT_INTERVAL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("5m\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_AUDIT_USERNAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("immugwauditor\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_AUDIT_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_PKEY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("./tools/mtls/4_client/private/localhost.key.pem\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_CERTIFICATE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("./tools/mtls/4_client/certs/localhost.cert.pem\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_CLIENTCAS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("./tools/mtls/2_intermediate/certs/ca-chain.cert.pem\n")])])]),t("h2",{attrs:{id:"immuadmin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#immuadmin"}},[a._v("#")]),a._v(" immuadmin")]),a._v(" "),t("p",[a._v("immuadmin can be used to install and manage the immugw service for Windows and Linux. immuadmin is part of the immugw repository.\n'git clone "),t("a",{attrs:{href:"https://github.com/codenotary/immudb.git",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://github.com/codenotary/immudb.git"),t("OutboundLink")],1),a._v("'")]),a._v(" "),t("h3",{attrs:{id:"linux-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-2"}},[a._v("#")]),a._v(" Linux")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GOOS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("linux "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GOARCH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("amd64 "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" immuadmin-static\n")])])]),t("h3",{attrs:{id:"windows-by-component"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows-by-component"}},[a._v("#")]),a._v(" Windows (by component)")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GOOS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("windows "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GOARCH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("amd64 "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" immuadmin-static\n")])])]),t("h2",{attrs:{id:"immugw-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#immugw-service"}},[a._v("#")]),a._v(" immugw service")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# install immugw service\n./immugw service install\n\n# check current immugw service status\n./immugw service status\n\n# stop immugw service\n./immugw service stop\n\n# start immugw service\n./immugw service start\n")])])]),t("p",[a._v("The linux service is using the following defaults:")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("File or configuration")]),a._v(" "),t("th",[a._v("location")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("all configuration files")]),a._v(" "),t("td",[a._v("/etc/immudb")])]),a._v(" "),t("tr",[t("td",[a._v("pid file")]),a._v(" "),t("td",[a._v("/var/lib/immudb/immugw.pid")])]),a._v(" "),t("tr",[t("td",[a._v("log files")]),a._v(" "),t("td",[a._v("/var/log/immudb")])])])]),a._v(" "),t("h2",{attrs:{id:"use-immugw"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#use-immugw"}},[a._v("#")]),a._v(" Use immugw")]),a._v(" "),t("p",[t("code",[a._v("immugw help")]),a._v(" is a good starting point")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("immu gateway: a smart REST proxy "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" immudb - the lightweight, high-speed immutable database "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" systems and applications.\nIt exposes all gRPC methods with a REST interface "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("while")]),a._v(" wrapping all SAFE endpoints with a verification service.\n\nEnvironment variables:\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_ADDRESS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3323")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_IMMUDB_ADDRESS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_IMMUDB_PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3322")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(".\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_PIDFILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_LOGFILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_DETACHED")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("false\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_MTLS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("false\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_SERVERNAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("localhost\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_PKEY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("./tools/mtls/4_client/private/localhost.key.pem\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_CERTIFICATE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("./tools/mtls/4_client/certs/localhost.cert.pem\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_CLIENTCAS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("./tools/mtls/2_intermediate/certs/ca-chain.cert.pem\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_AUDIT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"false"')]),a._v("\n  IMMUGW_AUDIT_INTERVAL "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"5m"')]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_AUDIT_USERNAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('""')]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("IMMUGW_AUDIT_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('""')]),a._v("\n\nUsage:\n  immugw "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("flags"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n  immugw "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("command"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\nAvailable Commands:\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("help")]),a._v("        Help about any "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("command")]),a._v("\n  version     Show the immugw version\n\nFlags:\n  -a, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--address")]),a._v(" string            immugw "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("host")]),a._v(" address "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("default "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"127.0.0.1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--audit")]),a._v("                     "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" audit mode "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("continuously fetches latest root from server, checks consistency against a "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("local")]),a._v(" root and saves the latest root locally"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n      --audit-interval duration   interval at "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("which")]),a._v(" audit should run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("default 5m0s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n      --audit-password string     immudb password used to login during audit\n      --audit-username string     immudb username used to login during audit "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("default "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"immugwauditor"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--certificate")]),a._v(" string        server certificate "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v(" path "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("default "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"./tools/mtls/4_client/certs/localhost.cert.pem"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--clientcas")]),a._v(" string          clients certificates list. Aka certificate authority "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("default "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"./tools/mtls/2_intermediate/certs/ca-chain.cert.pem"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--config")]),a._v(" string             config "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("default path are configs or "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$HOME")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v(" Default filename is immugw.toml"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  -d, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--detached")]),a._v("                  run immudb "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" background\n      "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dir")]),a._v(" string                program files folder "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("default "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"."')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  -h, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--help")]),a._v("                      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("help")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" immugw\n  -k, --immudb-address string     immudb "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("host")]),a._v(" address "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("default "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"127.0.0.1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  -j, --immudb-port int           immudb port number "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("default "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3322")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--logfile")]),a._v(" string            log path with filename. E.g. /tmp/immugw/immugw.log\n  -m, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--mtls")]),a._v("                      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" mutual tls\n      "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--pidfile")]),a._v(" string            pid path with filename. E.g. /var/run/immugw.pid\n      "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--pkey")]),a._v(" string               server private key path "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("default "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"./tools/mtls/4_client/private/localhost.key.pem"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  -p, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--port")]),a._v(" int                  immugw port number "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("default "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3323")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--servername")]),a._v(" string         used to verify the "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("hostname")]),a._v(" on the returned certificates "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("default "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"localhost"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\nUse "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"immugw [command] --help"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("more")]),a._v(" information about a command.\n")])])]),t("h2",{attrs:{id:"api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[a._v("#")]),a._v(" API")]),a._v(" "),t("h3",{attrs:{id:"immugw-restful-api-reference"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#immugw-restful-api-reference"}},[a._v("#")]),a._v(" immugw RESTful API reference")]),a._v(" "),t("p",[a._v("You can find the swagger schema here:")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/codenotary/immugw/blob/master/pkg/api/gw.schema.swagger.json",target:"_blank",rel:"noopener noreferrer"}},[a._v("swagger immugw"),t("OutboundLink")],1)]),a._v(" "),t("p",[a._v("If you want to run the Swagger UI, simply run the following Docker command after you cloned this repo:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8081")]),a._v(":8080 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" swagger-immugw "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PWD")]),a._v("}")]),a._v("/pkg/api/gw.schema.swagger.json:/openapi.json "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("SWAGGER_JSON")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/openapi.json  swaggerapi/swagger-ui\n")])])]),t("h3",{attrs:{id:"curl-examples"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#curl-examples"}},[a._v("#")]),a._v(" Curl examples")]),a._v(" "),t("p",[t("RouterLink",{attrs:{to:"/1.2.2/immugw/curl.html"}},[a._v("Curl code snippets")])],1),a._v(" "),t("h2",{attrs:{id:"auditor"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#auditor"}},[a._v("#")]),a._v(" Auditor")]),a._v(" "),t("p",[a._v("Auditors make sure that the data consistency is guaranteed inside immudb. They do a random key value verification and an interval-based Merkle-tree consistency check (5 minutes default). The immugw and the immuclient provide auditor functionality that runs as a daemon process. It is recommended to run immugw and immuclient on different machines than immudb, so any tampering on the immudb server is automatically detected.")]),a._v(" "),t("p",[a._v("The results of the auditors are provided by a Prometheus end point.")]),a._v(" "),t("h3",{attrs:{id:"immugw-auditor"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#immugw-auditor"}},[a._v("#")]),a._v(" immugw auditor")]),a._v(" "),t("p",[a._v("Start interactive:\n"),t("code",[a._v("immugw --audit")])]),a._v(" "),t("p",[a._v("Service configuration:\nTo enable auditor, you need to edit /etc/immudb/immugw.toml and add the following section:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("audit "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# false is default")]),a._v("\naudit-interval "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"5m"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# suffixes: "s", "m", "h", examples: 10s, 5m 1h')]),a._v("\naudit-username "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('""')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# when immudb authentication is enabled, use read-only user credentials here")]),a._v("\naudit-password "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('""')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# and the password")]),a._v("\n")])])]),t("p",[a._v("Restart the immugw service afterwards - "),t("code",[a._v("immuadmin service immugw restart")])]),a._v(" "),t("p",[t("strong",[a._v("immugw Port: 9476 - "),t("a",{attrs:{href:"http://immugw-auditor:9476/metrics",target:"_blank",rel:"noopener noreferrer"}},[a._v("http://immugw-auditor:9476/metrics"),t("OutboundLink")],1)])]),a._v(" "),t("p",[a._v("example output:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# HELP immugw_audit_curr_root_per_server Current root index used for the latest audit.")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# TYPE immugw_audit_curr_root_per_server gauge")]),a._v("\nimmugw_audit_curr_root_per_server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("server_address"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"127.0.0.1:3322"')]),a._v(",server_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"br8eugq036tfln0ct6o0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# HELP immugw_audit_prev_root_per_server Previous root index used for the latest audit.")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# TYPE immugw_audit_prev_root_per_server gauge")]),a._v("\nimmugw_audit_prev_root_per_server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("server_address"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"127.0.0.1:3322"')]),a._v(",server_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"br8eugq036tfln0ct6o0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# HELP immugw_audit_result_per_server Latest audit result (1 = ok, 0 = tampered).")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# TYPE immugw_audit_result_per_server gauge")]),a._v("\nimmugw_audit_result_per_server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("server_address"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"127.0.0.1:3322"')]),a._v(",server_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"br8eugq036tfln0ct6o0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# HELP immugw_audit_run_at_per_server Timestamp in unix seconds at which latest audit run.")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# TYPE immugw_audit_run_at_per_server gauge")]),a._v("\nimmugw_audit_run_at_per_server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("server_address"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"127.0.0.1:3322"')]),a._v(",server_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"br8eugq036tfln0ct6o0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(".590757033502689e+09\n")])])]),t("h2",{attrs:{id:"license"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#license"}},[a._v("#")]),a._v(" License")]),a._v(" "),t("p",[a._v("immugw is "),t("a",{attrs:{href:"https://github.com/codenotary/immugw/blob/master/LICENSE",target:"_blank",rel:"noopener noreferrer"}},[a._v("Apache v2.0 License"),t("OutboundLink")],1),a._v(".")])])}),[],!1,null,null,null);t.default=r.exports}}]);