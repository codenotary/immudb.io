(window.webpackJsonp=window.webpackJsonp||[]).push([[681],{1042:function(t,e,s){"use strict";s.r(e);var a=s(2),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"health-monitoring"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#health-monitoring"}},[t._v("#")]),t._v(" Health Monitoring")]),t._v(" "),s("WrappedSection",[s("h2",{attrs:{id:"prometheus-metrics"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#prometheus-metrics"}},[t._v("#")]),t._v(" Prometheus metrics")]),t._v(" "),s("p",[t._v("immudb exposes a Prometheus end-point, by default on port 9497 on "),s("code",[t._v("/metrics")]),t._v("."),s("br")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -s http://localhost:9497/metrics \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP go_gc_duration_seconds A summary of the pause duration of garbage collection cycles.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE go_gc_duration_seconds summary")]),t._v("\ngo_gc_duration_seconds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("quantile"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(".3355e-05\ngo_gc_duration_seconds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("quantile"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.25"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(".3615e-05\ngo_gc_duration_seconds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("quantile"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.5"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(".9991e-05\ngo_gc_duration_seconds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("quantile"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.75"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(".0348e-05\ngo_gc_duration_seconds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("quantile"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(".3859e-05\ngo_gc_duration_seconds_sum "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.000151623")]),t._v("\ngo_gc_duration_seconds_count "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP go_goroutines Number of goroutines that currently exist.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])]),s("p",[t._v("Querying metrics with a simple curl command is not a very practical solution. immudb has predefined Grafana dashboard visualizing some of the key metrics. This dashboard can be downloaded from "),s("a",{attrs:{href:"https://github.com/codenotary/immudb/blob/master/tools/monitoring/grafana-dashboard.json",target:"_blank",rel:"noopener noreferrer"}},[t._v("immudb github repository"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("div",{staticClass:"wrapped-picture"},[s("p",[s("img",{attrs:{src:"/immudb/grafana-immudb.png",alt:"immudb grafana stats"}})])]),t._v(" "),s("p",[t._v("You can also use "),s("code",[t._v("immuadmin stats")]),t._v(" to see these metrics without additional tools:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("./immuadmin stats\n")])])]),s("div",{staticClass:"wrapped-picture blend-screen"},[s("p",[s("img",{attrs:{src:"/immudb/immuadmin-stats.png",alt:"immuadmin stats"}})])]),t._v(" "),s("p",[t._v("immudb exports the standard Go metrics, so dashboards like "),s("a",{attrs:{href:"https://grafana.com/grafana/dashboards/10826",target:"_blank",rel:"noopener noreferrer"}},[t._v("Go metrics"),s("OutboundLink")],1),t._v(" work out of the box.")]),t._v(" "),s("div",{staticClass:"wrapped-picture"},[s("p",[s("img",{attrs:{src:"/immudb/grafana-go.jpg",alt:"immuadmin stats"}})])]),t._v(" "),s("p",[t._v("For very simple cases, you can use "),s("code",[t._v("immuadmin status")]),t._v(" from monitoring scripts to ping the server:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ ./immuadmin status\nOK - server is reachable and responding to queries\n")])])])]),t._v(" "),s("WrappedSection",[s("h2",{attrs:{id:"database-size"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#database-size"}},[t._v("#")]),t._v(" Database size")]),t._v(" "),s("p",[t._v("Following metric contains the information about the disk space usage in bytes for each individual database:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -s localhost:9497/metrics "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" immudb_db_size_bytes\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_db_size_bytes Database size in bytes.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_db_size_bytes gauge")]),t._v("\nimmudb_db_size_bytes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"defaultdb"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2929")]),t._v("\nimmudb_db_size_bytes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"systemdb"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3789")]),t._v("\n")])])]),s("p",[t._v("The official "),s("a",{attrs:{href:"https://github.com/codenotary/immudb/blob/master/tools/monitoring/grafana-dashboard.json",target:"_blank",rel:"noopener noreferrer"}},[t._v("grafana dashboard"),s("OutboundLink")],1),t._v(" is using this metric\nto show the amount of disk space used by databases and the growth of disk usage over time.")]),t._v(" "),s("p",[t._v("Those dashboards can be used to forecast disk usage and make sure it’s not getting out of control.")]),t._v(" "),s("div",{staticClass:"wrapped-picture"},[s("p",[s("img",{attrs:{src:"/immudb/metrics-dbsize.jpg",alt:"database size"}})])])]),t._v(" "),s("WrappedSection",[s("h2",{attrs:{id:"database-entries"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#database-entries"}},[t._v("#")]),t._v(" Database entries")]),t._v(" "),s("p",[t._v("Following prometheus metric calculates the number of new KV entries added to the database since the start of the process:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -s http://localhost:9497/metrics "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" immudb_number_of_stored_entries\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_number_of_stored_entries Number of key-value entries currently stored by the database.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_number_of_stored_entries gauge")]),t._v("\nimmudb_number_of_stored_entries"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"defaultdb"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nimmudb_number_of_stored_entries"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"systemdb"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n")])])]),s("p",[s("a",{attrs:{href:"https://github.com/codenotary/immudb/blob/master/tools/monitoring/grafana-dashboard.json",target:"_blank",rel:"noopener noreferrer"}},[t._v("Grafana dashboard"),s("OutboundLink")],1),t._v(" show the amount of new DB entries and the insertion rate.\nThis chart does not display the total amount of KV entries and will be reset to zero upon immudb restart.")]),t._v(" "),s("div",{staticClass:"wrapped-picture"},[s("p",[s("img",{attrs:{src:"/immudb/metrics-entries.jpg",alt:"database entries"}})])])]),t._v(" "),s("WrappedSection",[s("h2",{attrs:{id:"indexer-metrics"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#indexer-metrics"}},[t._v("#")]),t._v(" Indexer metrics")]),t._v(" "),s("p",[t._v("Immudb does expose metrics related to internal indexing process:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -s http://localhost:9497/metrics "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'immudb_last_.*_trx_id'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_last_committed_trx_id The highest id of committed transaction")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_last_committed_trx_id gauge")]),t._v("\nimmudb_last_committed_trx_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"defaultdb"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nimmudb_last_committed_trx_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"systemdb"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_last_indexed_trx_id The highest id of indexed transaction")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_last_indexed_trx_id gauge")]),t._v("\nimmudb_last_indexed_trx_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"defaultdb"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nimmudb_last_indexed_trx_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"systemdb"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n")])])]),s("p",[t._v("Those metrics are used on various graphs on the "),s("a",{attrs:{href:"https://github.com/codenotary/immudb/blob/master/tools/monitoring/grafana-dashboard.json",target:"_blank",rel:"noopener noreferrer"}},[t._v("Grafana dashboard"),s("OutboundLink")],1),t._v(".")])]),t._v(" "),s("WrappedSection",[s("h3",{attrs:{id:"indexed"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#indexed"}},[t._v("#")]),t._v(" Indexed %")]),t._v(" "),s("p",[t._v("This graph shows the total percentage of all transactions in the database that has been indexed so far.\nIn a healthy situation, this chart should remain at or close to 100%.\nIf this value starts dropping down, that means that the data ingestion rate is higher than the indexing rate\nindicating that additional rate limiting should be added to db writers.")]),t._v(" "),s("div",{staticClass:"wrapped-picture"},[s("p",[s("img",{attrs:{src:"/immudb/metrics-indexed-percent.jpg",alt:"database entries"}})])])]),t._v(" "),s("WrappedSection",[s("h3",{attrs:{id:"indexing-commit-rate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#indexing-commit-rate"}},[t._v("#")]),t._v(" Indexing / Commit rate")]),t._v(" "),s("p",[t._v("This chart shows the rate of new transactions added to the database and the rate of indexing those transactions. If the indexing rate is smaller than the commit rate, this means that the database isn’t keeping up with the indexing. In applications where only synchronous writes are performed or where data can be immediately indexed, the indexing rate line (Idx) and commit rate line (Cmt) will overlap.")]),t._v(" "),s("div",{staticClass:"wrapped-picture"},[s("p",[s("img",{attrs:{src:"/immudb/metrics-indexing-rate.jpg",alt:"database entries"}})])])]),t._v(" "),s("WrappedSection",[s("h3",{attrs:{id:"trxs-left-to-index"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#trxs-left-to-index"}},[t._v("#")]),t._v(" TRXs Left to Index")]),t._v(" "),s("p",[t._v("This chart shows the number of transactions waiting for indexing. This value should be close to zero and should have a decreasing tendency.")]),t._v(" "),s("div",{staticClass:"wrapped-picture"},[s("p",[s("img",{attrs:{src:"/immudb/metrics-indexing-left.jpg",alt:"database entries"}})])])]),t._v(" "),s("WrappedSection",[s("h3",{attrs:{id:"trx-count"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#trx-count"}},[t._v("#")]),t._v(" TRX Count")]),t._v(" "),s("p",[t._v("This chart shows the total number of transactions in the database.")]),t._v(" "),s("div",{staticClass:"wrapped-picture"},[s("p",[s("img",{attrs:{src:"/immudb/metrics-trx-count.jpg",alt:"database entries"}})])])]),t._v(" "),s("WrappedSection",[s("h2",{attrs:{id:"btree-metrics"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#btree-metrics"}},[t._v("#")]),t._v(" Btree metrics")]),t._v(" "),s("p",[t._v("immudb exposes various metrics per btree instance. The "),s("code",[t._v("id")]),t._v(" label is a relative path for the location of the btree on disk.\nCurrently there's a single btree instance per one database.")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -s http://localhost:9497/metrics "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'immudb_btree_'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_btree_depth Btree depth")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_btree_depth gauge")]),t._v("\nimmudb_btree_depth"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/defaultdb/index"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nimmudb_btree_depth"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/systemdb/index"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_btree_flushed_entries_last_cycle Numbers of btree entries written to disk during the last flush process")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_btree_flushed_entries_last_cycle gauge")]),t._v("\nimmudb_btree_flushed_entries_last_cycle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/defaultdb/index"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nimmudb_btree_flushed_entries_last_cycle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/systemdb/index"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_btree_flushed_entries_total Number of btree entries written to disk during flush since the immudb process was started")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_btree_flushed_entries_total counter")]),t._v("\nimmudb_btree_flushed_entries_total"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/defaultdb/index"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nimmudb_btree_flushed_entries_total"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/systemdb/index"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_btree_flushed_nodes_last_cycle Numbers of btree nodes written to disk during the last flush process")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_btree_flushed_nodes_last_cycle gauge")]),t._v("\nimmudb_btree_flushed_nodes_last_cycle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/defaultdb/index"')]),t._v(",kind"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"inner"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_btree_flushed_nodes_last_cycle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/defaultdb/index"')]),t._v(",kind"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"leaf"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nimmudb_btree_flushed_nodes_last_cycle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/systemdb/index"')]),t._v(",kind"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"inner"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_btree_flushed_nodes_last_cycle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/systemdb/index"')]),t._v(",kind"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"leaf"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_btree_flushed_nodes_total Number of btree nodes written to disk during flush since the immudb process was started")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_btree_flushed_nodes_total counter")]),t._v("\nimmudb_btree_flushed_nodes_total"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/defaultdb/index"')]),t._v(",kind"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"inner"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_btree_flushed_nodes_total"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/defaultdb/index"')]),t._v(",kind"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"leaf"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\nimmudb_btree_flushed_nodes_total"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/systemdb/index"')]),t._v(",kind"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"inner"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_btree_flushed_nodes_total"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/systemdb/index"')]),t._v(",kind"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"leaf"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_btree_leaf_node_entries Histogram of number of entries in as single leaf btree node, calculated when visiting btree nodes")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_btree_leaf_node_entries histogram")]),t._v("\nimmudb_btree_leaf_node_entries_bucket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/defaultdb/index"')]),t._v(",le"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("\nimmudb_btree_leaf_node_entries_bucket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/defaultdb/index"')]),t._v(",le"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\nimmudb_btree_leaf_node_entries_sum"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/defaultdb/index"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\nimmudb_btree_leaf_node_entries_count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/defaultdb/index"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("\nimmudb_btree_leaf_node_entries_bucket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/systemdb/index"')]),t._v(",le"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\nimmudb_btree_leaf_node_entries_bucket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/systemdb/index"')]),t._v(",le"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\nimmudb_btree_leaf_node_entries_sum"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/systemdb/index"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v("\nimmudb_btree_leaf_node_entries_count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/systemdb/index"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_btree_nodes_data_begin Beginning offset for btree nodes data file")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_btree_nodes_data_begin gauge")]),t._v("\nimmudb_btree_nodes_data_begin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/defaultdb/index"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_btree_nodes_data_begin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/systemdb/index"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_btree_nodes_data_end End offset for btree nodes data appendable")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_btree_nodes_data_end gauge")]),t._v("\nimmudb_btree_nodes_data_end"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/defaultdb/index"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\nimmudb_btree_nodes_data_end"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data/systemdb/index"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("281")]),t._v("\n")])])]),s("p",[s("a",{attrs:{href:"https://github.com/codenotary/immudb/blob/master/tools/monitoring/grafana-dashboard.json",target:"_blank",rel:"noopener noreferrer"}},[t._v("Grafana dashboard"),s("OutboundLink")],1),t._v(" exposes both some basic and more advanced btree statistics.")])]),t._v(" "),s("WrappedSection",[s("h3",{attrs:{id:"btree-cache-size-btree-cache-hit"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#btree-cache-size-btree-cache-hit"}},[t._v("#")]),t._v(" Btree Cache Size / Btree Cache Hit %")]),t._v(" "),s("p",[t._v("Those two charts show internal statistics about immudb btree cache.\nIn order to avoid reading large amounts of data on every btree operation,\nimmudb keeps an in-memory cache of recently used btree nodes.\nThe amount of nodes in the cache is shown in the first chart,\nit is capped at the maximum amount of cache entries.")]),t._v(" "),s("p",[t._v("The second chart shows how effective the cache is\npresenting the percentage of btree node lookups that were optimized with the cache.\nFor small databases, it’s very likely that this hit ratio will be close to 100%,\nbut it will drop down once the amount of data increases.\nThere’s no single rule on what value we should expect here.\nIn our internal tests even 40% cache hit ratios with workloads using keys with random distribution were still yielding very good performance results.\nTo get higher cache utilization, applications should prefer working on keys close to themselves -\nsuch as using sequentially increasing numbers where newly inserted data will end up\nin the btree portion close to previously accessed entries.")]),t._v(" "),s("div",{staticClass:"wrapped-picture"},[s("p",[s("img",{attrs:{src:"/immudb/metrics-btree-hit.jpg",alt:"database entries"}})])])]),t._v(" "),s("WrappedSection",[s("h3",{attrs:{id:"btree-depth"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#btree-depth"}},[t._v("#")]),t._v(" Btree Depth")]),t._v(" "),s("p",[t._v("This chart shows the depth of the tree.\nSince btrees are auto-balancing data structures,\nthis depth will have a logarithmic tendency.\nThe depth of the tree indicates what is the amount of nodes traversed by each btree operation.")]),t._v(" "),s("div",{staticClass:"wrapped-picture"},[s("p",[s("img",{attrs:{src:"/immudb/metrics-btree-depth.jpg",alt:"database entries"}})])])]),t._v(" "),s("WrappedSection",[s("h3",{attrs:{id:"btree-child-node-count-distributions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#btree-child-node-count-distributions"}},[t._v("#")]),t._v(" Btree Child Node Count Distributions")]),t._v(" "),s("p",[t._v("These graphs show the distribution of the amount of child nodes.\nIn a healthy btree like the one below,\nthe amount of child nodes should be focused around a single value (40 in the example).\nAlso the amount of child nodes should be kept at sane levels -\nvalues below 10 or above few hundred are a good indication that the btree isn’t performing well\nand the application should consider using keys of different,\nmore uniform and shorter lengths for its data.")]),t._v(" "),s("p",[s("em",[t._v("Note: These statistics are gathered when traversing the btree, if there’s no activity in the database the distribution will be flat.")])]),t._v(" "),s("div",{staticClass:"wrapped-picture"},[s("p",[s("img",{attrs:{src:"/immudb/metrics-btree-distribution.jpg",alt:"database entries"}})])])]),t._v(" "),s("WrappedSection",[s("h3",{attrs:{id:"flush-statistics"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flush-statistics"}},[t._v("#")]),t._v(" Flush Statistics")]),t._v(" "),s("p",[t._v("immudb keeps recent btree changes in memory to reduce the amount of data to be written to disk.\nIn order to persist those changes, there’s a btree flush process called once a threshold of new and modified entries is reached.")]),t._v(" "),s("div",{staticClass:"wrapped-picture"},[s("p",[s("img",{attrs:{src:"/immudb/metrics-btree-flush-entries.jpg",alt:"database entries"}}),t._v(" "),s("img",{attrs:{src:"/immudb/metrics-btree-flush-nodes.jpg",alt:"database entries"}})])]),t._v(" "),s("p",[t._v("These metrics are calculated for nodes (both inner and leaf ones) and separately for KV entries in the leaf nodes.")]),t._v(" "),s("p",[t._v("The flush rate shows the rate of written nodes / entries per second.\nIt clearly shows where the flush process started and where it ended.")]),t._v(" "),s("p",[t._v("Flush progress metrics for each flush cycle starts at zero and reach the total amount of entries processed during such single flush operation.\nThe next flush will repeat the process by starting from zero reaching the maximum value.\nBy looking at those maximum values, we can see how much data needs to be written to disk during flush operations.\nDuring normal DB operation, it should be steady over time.\nAn unbound growth of those maximums could indicate that the flush operation is too aggressive and the threshold should be adjusted.")])]),t._v(" "),s("WrappedSection",[s("h3",{attrs:{id:"compaction-statistics"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#compaction-statistics"}},[t._v("#")]),t._v(" Compaction Statistics")]),t._v(" "),s("p",[t._v("Similarly to flush statistics, immudb exposes the same set of values for full compaction.")]),t._v(" "),s("p",[s("em",[t._v("Note: these values are gathered for overall compaction that fully rewrites the btree structure. immudb 1.2.3 introduced a new online compaction mode that gradually removes unused btree data during flush operation. This new compaction mode is not included in those charts.")])]),t._v(" "),s("div",{staticClass:"wrapped-picture"},[s("p",[s("img",{attrs:{src:"/immudb/metrics-btree-compaction-entries.jpg",alt:"database entries"}}),t._v(" "),s("img",{attrs:{src:"/immudb/metrics-btree-compaction-nodes.jpg",alt:"database entries"}})])])]),t._v(" "),s("WrappedSection",[s("h3",{attrs:{id:"data-size-for-btree-nodes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#data-size-for-btree-nodes"}},[t._v("#")]),t._v(" Data Size for Btree Nodes")]),t._v(" "),s("p",[t._v("immudb internally uses append-only files to store data.\nThat is also used for btree nodes.\nWe don’t replace existing data on disk.\nInstead we append a new modified version at the end of the data stream.\nimmudb 1.2.3 introduced new online compaction of btree data that deals with garbage\nthat naturally accumulates at the beginning of such data stream over time.\nThis chart can be used to ensure that the amount of data being used for btree nodes\nis being reduced whenever a cleanup operation is performed.")]),t._v(" "),s("div",{staticClass:"wrapped-picture"},[s("p",[s("img",{attrs:{src:"/immudb/metrics-btree-data-size.jpg",alt:"database entries"}})])])]),t._v(" "),s("WrappedSection",[s("h2",{attrs:{id:"s3-storage-metrics"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#s3-storage-metrics"}},[t._v("#")]),t._v(" S3 storage metrics")]),t._v(" "),s("p",[t._v("Various metrics are exposed when working with remote storage such as S3.\nThose can be used to help analyzing s3 performance and resource consumption.")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -s http://localhost:9497/metrics "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'remote'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_remoteapp_chunk_bytes Total number of bytes stored in chunks")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_remoteapp_chunk_bytes gauge")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\nimmudb_remoteapp_chunk_bytes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"defaultdb/aht/tree/"')]),t._v(",state"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Active"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("133631")]),t._v("\nimmudb_remoteapp_chunk_bytes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"defaultdb/aht/tree/"')]),t._v(",state"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Cleaning"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_chunk_bytes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"defaultdb/aht/tree/"')]),t._v(",state"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"DownloadError"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_chunk_bytes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"defaultdb/aht/tree/"')]),t._v(",state"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Downloading"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_chunk_bytes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"defaultdb/aht/tree/"')]),t._v(",state"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Invalid"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_chunk_bytes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"defaultdb/aht/tree/"')]),t._v(",state"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Local"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_chunk_bytes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"defaultdb/aht/tree/"')]),t._v(",state"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Remote"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(".048767e+06\nimmudb_remoteapp_chunk_bytes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"defaultdb/aht/tree/"')]),t._v(",state"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UploadError"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_chunk_bytes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"defaultdb/aht/tree/"')]),t._v(",state"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Uploading"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_remoteapp_chunk_count Number of chunks used for immudb remote storage")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_remoteapp_chunk_count gauge")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\nimmudb_remoteapp_chunk_count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"defaultdb/aht/tree/"')]),t._v(",state"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Active"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nimmudb_remoteapp_chunk_count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"defaultdb/aht/tree/"')]),t._v(",state"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Cleaning"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_chunk_count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"defaultdb/aht/tree/"')]),t._v(",state"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"DownloadError"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_chunk_count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"defaultdb/aht/tree/"')]),t._v(",state"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Downloading"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_chunk_count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"defaultdb/aht/tree/"')]),t._v(",state"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Invalid"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_chunk_count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"defaultdb/aht/tree/"')]),t._v(",state"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Local"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_chunk_count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"defaultdb/aht/tree/"')]),t._v(",state"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Remote"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_remoteapp_corrupted_metadata Number of corrupted metadata detections in an immudb remote storage")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_remoteapp_corrupted_metadata counter")]),t._v("\nimmudb_remoteapp_corrupted_metadata "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_remoteapp_download_events Immudb remote storage download event counters")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_remoteapp_download_events counter")]),t._v("\nimmudb_remoteapp_download_events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cancelled"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_download_events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"failed"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_download_events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"finished"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_download_events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"retried"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_download_events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"started"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_download_events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"succeeded"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_remoteapp_open_time Histogram of the total time required to open a chunk of data stored on an immudb remote storage")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_remoteapp_open_time histogram")]),t._v("\nimmudb_remoteapp_open_time_bucket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("le"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_open_time_bucket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("le"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.25"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\nimmudb_remoteapp_open_time_sum "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.747774699")]),t._v("\nimmudb_remoteapp_open_time_count "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_remoteapp_read_bytes Total number of bytes read from immudb remote storage (including cached reads)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_remoteapp_read_bytes counter")]),t._v("\nimmudb_remoteapp_read_bytes "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_remoteapp_read_events Read event counters for immudb remote storage")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_remoteapp_read_events counter")]),t._v("\nimmudb_remoteapp_read_events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"errors"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_read_events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"total_reads"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_remoteapp_s3_download_bytes Number data bytes (excluding headers) downloaded from s3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_remoteapp_s3_download_bytes counter")]),t._v("\nimmudb_remoteapp_s3_download_bytes "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(".097657e+06\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_remoteapp_s3_upload_bytes Number data bytes (excluding headers) uploaded to s3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_remoteapp_s3_upload_bytes counter")]),t._v("\nimmudb_remoteapp_s3_upload_bytes "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(".097657e+06\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_remoteapp_uncached_read_bytes Direct (uncached) read byte counters for immudb remote storage")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_remoteapp_uncached_read_bytes counter")]),t._v("\nimmudb_remoteapp_uncached_read_bytes "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(".097645e+06\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_remoteapp_uncached_read_events Direct (uncached) read event counters for immudb remote storage")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_remoteapp_uncached_read_events counter")]),t._v("\nimmudb_remoteapp_uncached_read_events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"errors"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_uncached_read_events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"total_reads"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_remoteapp_upload_events Immudb remote storage upload event counters")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_remoteapp_upload_events counter")]),t._v("\nimmudb_remoteapp_upload_events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cancelled"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_upload_events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"failed"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_upload_events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"finished"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\nimmudb_remoteapp_upload_events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"retried"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_upload_events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"started"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\nimmudb_remoteapp_upload_events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"succeeded"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HELP immudb_remoteapp_upload_time Histogram of the total time required to upload a chunk to the remote storage")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TYPE immudb_remoteapp_upload_time histogram")]),t._v("\nimmudb_remoteapp_upload_time_bucket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("le"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nimmudb_remoteapp_upload_time_bucket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("le"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.25"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\nimmudb_remoteapp_upload_time_sum "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.983413478")]),t._v("\nimmudb_remoteapp_upload_time_count "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n")])])]),s("p",[t._v("The section related to S3 in the "),s("a",{attrs:{href:"https://github.com/codenotary/immudb/blob/master/tools/monitoring/grafana-dashboard.json",target:"_blank",rel:"noopener noreferrer"}},[t._v("Grafana dashboard"),s("OutboundLink")],1),t._v(" is in its early days\nbut already shows some basic insights into what the data performance is using immudb\nwith an AWS S3 backed data store.\nThe first chart shows the histogram of a single s3 object read duration,\nthe second one shows the inbound traffic needed for immudb operations.\nIf those values are high,\nyou should consider switching back to local disk and an alternative remote storage back-end such as EBS volumes.")]),t._v(" "),s("div",{staticClass:"wrapped-picture"},[s("p",[s("img",{attrs:{src:"/immudb/metrics-s3.jpg",alt:"database entries"}})])])]),t._v(" "),s("WrappedSection",[s("h2",{attrs:{id:"immuguard-health-check-tool"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#immuguard-health-check-tool"}},[t._v("#")]),t._v(" immuguard health check tool")]),t._v(" "),s("p",[t._v("To help you check global immudb health, and reliably deploy immudb in production environment, you can use immuguard,\nthe health check tool you can find in the "),s("a",{attrs:{href:"https://github.com/codenotary/immudb-tools",target:"_blank",rel:"noopener noreferrer"}},[t._v("immudb-tools"),s("OutboundLink")],1),t._v(" repository.")]),t._v(" "),s("p",[t._v("This simple tool periodically polls immudb, checking the state of every loaded database, and exposes a simple REST endpoint\nthat can be used by docker or kubernetes probes. You simply have to configure it to talk to immudb, by providing its address\nand some credentials.")]),t._v(" "),s("p",[t._v("Then you can poll endpoint "),s("code",[t._v("/immustatus")]),t._v(' on port 8085. If immudb is operating normally and all databases are responsive, you will get a 200 HTTP return code, and the string "OK". You will get a 500 HTTP code instead, and the string "FAIL" if immudb is not responding.')]),t._v(" "),s("p",[t._v("This configuration snippet shows how to use the "),s("code",[t._v("/immustatus")]),t._v(" endpoint on kubernetes:")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[t._v("        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("livenessProbe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("httpGet")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /immustatus\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8085")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("failureThreshold")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("periodSeconds")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v("\n")])])]),s("p",[t._v("You can find more information about it on its "),s("a",{attrs:{href:"https://github.com/codenotary/immudb-tools/tree/main/immuguard",target:"_blank",rel:"noopener noreferrer"}},[t._v("README"),s("OutboundLink")],1),t._v(" page.")])])],1)}),[],!1,null,null,null);e.default=n.exports}}]);